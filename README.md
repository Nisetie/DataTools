# DataTools. Ещё одно ORM.

Преобразование данных, получаемых из компонентов ADO.NET в модели (классы) и обратно. Основные приемы и технологии:
- рефлексия для предварительного составления метаданных моделей
- Expression Tree для подготовки функций маппинга и генерации CRUD-команд

Возможности:
- преобразование информации из данных IDataReader в экземпляры классов или динамические объекты
- автоматическое преобразование экземлпяров моделей (классов) в строковые литералы при передаче CRUD-команд на сторону СУБД
- конструирование SQL-команд и запросов
- генерация метаданных, их разворачивание и миграция данных из одной СУБД в другую.
- расширяемость поддержки различных СУБД

Реализована работа с СУБД:
- MSSQL
- PostgreSQL
- SQLite в режимах file и in-memory

Начало создания: осень-зима 2024г.

## Основные компоненты

### Библиотека DataTools
Ядро системы, включающее все базовые классы, интерфейсы и классы расширений для развития функционала.

### Библиотека DataTools_MSSQL
Реализация взаимодействия с СУБД MSSQL.

### Библиотека DataTools_PostgreSQL
Реализация взаимодействия с СУБД PostgreSQL.

**Внимание!** Следует быть внимательным при работе с типом данных **timestamptz**! Возможна потеря или искажение точности временных меток при их получении из СУБД из-за неочевидной интерпретации часовых поясов. Для универсального подхода было решено явно указать способ преобразования поля из DataReader через такой код в классе PostgreSQL_DataContext:

<code>this.AddCustomTypeConverter<DateTimeOffset>(o => DateTimeOffset.Parse(o.ToString(), null, DateTimeStyles.AssumeUniversal));</code>

### Библиотека DataTools_SQLite
Реализация взаимодействия с БД SQLite.

### Библиотека DataTools_InMemory_SQLite
Реализация взаимодействия с БД SQLite только в режиме in-memory.

### Библиотека DataTools_GeneratorLib
Основная библиотека сбора метаданных из СУБД

### Консольное приложение DataTools_Generator
Утилита для анализа и созранения описаний моделей данных.

### Библиотека DataTools_DeployerLib
Основная библиотека для разворачивания метамоделей в целевой СУБД.

### Консольное приложение DataTools_Deployer
Утилита для разворачивания метамоделей в целевой СУБД. Использовать после генерации метамоделей.

### Библиотека DataTools_DataMigrationLib
Основная библиотека для переноса данных из одной СУБД в другую.

### Консольное приложение DataTools_DataMigration
Утилита для переноса данных из одной СУБД в другую. Использовать после разворачивания метамоделей.
